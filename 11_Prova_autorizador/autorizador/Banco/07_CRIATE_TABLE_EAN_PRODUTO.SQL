CREATE TABLE TB_EAN_PRODUTO (
    COD_PROD    NUMBER(6),
    COD_FORN    NUMBER(6),
    COD_EAN     NUMBER(13),
    CNPJ_FORN   NUMBER(14),
    DT_INI      DATE,
    DT_FIM      DATE
);


COMMENT ON COLUMN TB_EAN_PRODUTO.COD_PROD IS 'CODIGO PRODUTO NA SAUDE NOVA PBM';
COMMENT ON COLUMN TB_EAN_PRODUTO.COD_FORN IS 'CODIGO DO FORNECEDOR FK TB_FORNECEDOR';
COMMENT ON COLUMN TB_EAN_PRODUTO.COD_EAN IS 'COD EAN - CODIGO DE BARRAS DO PRODUTO FK TB_FORNECEDOR';
COMMENT ON COLUMN TB_EAN_PRODUTO.CNPJ_FORN IS 'FK TB FORNECEDOR';
COMMENT ON COLUMN TB_EAN_PRODUTO.DT_INI IS 'DATA INICIO DA SITUACAO';
COMMENT ON COLUMN TB_EAN_PRODUTO.DT_FIM IS 'DATA FIM DA SITUACAO';


ALTER TABLE TB_EAN_PRODUTO
    ADD CONSTRAINT PK_COD_EAN_PROD PRIMARY KEY (COD_PROD, COD_EAN)
    USING INDEX;


ALTER TABLE TB_EAN_PRODUTO
ADD CONSTRAINT FK_EAN_PRODUTO_PROD FOREIGN KEY (COD_PROD)
  REFERENCES TB_PRODUTO(COD_PROD);


ALTER TABLE TB_EAN_PRODUTO
ADD CONSTRAINT FK_EAN_PRODUTO_FORN FOREIGN KEY (COD_FORN, CNPJ_FORN, COD_EAN)
  REFERENCES TB_FORNECEDOR(COD_FORN, CNPJ_FORN, COD_EAN);




CREATE INDEX INX_PROD_DT_FIM ON TB_EAN_PRODUTO (COD_PROD, DT_FIM);


CREATE INDEX INX_EAN_DT_FIM ON TB_EAN_PRODUTO (COD_EAN, DT_FIM);


